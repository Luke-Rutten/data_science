<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Luke Rutten">
<meta name="dcterms.date" content="2024-05-20">
<meta name="description" content="Summarizing a good book and extracting its key ideas.">

<title>Exploring Data Science - Deliberate Practice - Getting Better, Faster</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Exploring Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Luke Rutten</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Luke-Rutten"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/lukerutten/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Deliberate Practice - Getting Better, Faster</h1>
                  <div>
        <div class="description">
          Summarizing a good book and extracting its key ideas.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Introduction</div>
                <div class="quarto-category">Strategizing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Luke Rutten </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 20, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Welcome to the first post of my blog on Data Science!</p>
<p>Yes, yes, I know the title says “practice,” not “data” or “science,” but trust me – it connects. At the time of writing, I’m currently in the process of learning how to be a good (read: hirable) data scientist and it’s likely that I’m going to need to learn a thing or two to get there. As I was having a conversation with someone who knows a lot about how best to go about doing that, I was given two unexpected pieces of advice:</p>
<p>1) Read “Peak: Secrets From the New Science of Expertise”</p>
<p>2) Start a blog</p>
<p>So. Here I am. Blogging about Peak.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.pexels.com/@tobiasbjorkli/highlights/"><img src="tobiasbjorkli.jpg" class="img-fluid figure-img" width="2000" alt="Photo by Tobias Bjorkli"></a></p>
<figcaption>Photo by Tobias Bjorkli</figcaption>
</figure>
</div>
<p>Peak is a book about developing expertise but, much more accurately than that, it’s a book about practice. Specifically, it’s a book about what the authors call “deliberate practice,” how to do it, and why it’s the most effective path to becoming an expert. This blog post is both a summary of my key takeaways from that book and an extension to how I see it applying to my journey into data science. So, without any further ado, here are some of the highlights from Peak.</p>
<p>Practice does not make perfect.</p>
<p>Practice makes permanent.</p>
<p>Practice takes processes that require conscious attention and creates unconscious copies so that next time, we don’t need to think. We can just do. Practice makes our actions faster. And easier. And automatic. Therefore, to practice effectively, we need to (1) identify the exact behaviors we want automated and (2) practice them until they are.</p>
<p>Now, the interesting thing about practice is that not all forms are created equal. At its core, practice depends on neurobiological mechanisms designed to help our brains grow faster and more energy efficient. In much the same way that we can tailor our workout plans to build better muscles, we can also tailor our practice to make use of these mechanisms and, in doing so, push ourselves to improve even faster and even further than we would ever have otherwise been able to go.</p>
<p>This is the process known as “deliberate practice” and this is the concept that this blog post is dedicated to.</p>
<section id="neurobiology-under-the-hood-of-deliberate-practice" class="level1">
<h1>Neurobiology: Under the Hood of Deliberate Practice</h1>
<p>Brains love efficiency.</p>
<p>Or, more specifically, evolution loves efficiency and brains are no exception to this rule. In line with this, our brains have evolved a whole host of mechanisms designed to process information more efficiently and it is precisely these mechanisms which deliberate practice aims to harness. What are these? Well the short answer is something like “long term potentiation” coupled with “synaptic pruning,” but instead of giving a long-winded, academic explanation of those processes, I’ll just give you an example of them in action: typing. The process of transforming ideas in your head into words on a screen.</p>
<p>Typing is a deceptively complicated process. It begins with taking a concept that you want to communicate, translating that concept into words, forming those words into coherent sentences, spelling each word, then moving one’s fingers in coordination to hit the right keys at the right time to produce the desired output. If you had to stop and consciously think through every little decision you make while typing, it would take minutes, maybe hours, just to get through a single sentence! I mean, can you imagine it?</p>
<p><em>“Alright, I want this sentence to address the reader, so we’ll start with the word ‘you.’ And that word begins with the letter ‘y.’ The y key is in the top center of the keyboard, so now I’ll move my right pointer finger up to press it. But wait! Since it’s the first letter of the first word of a new sentence, I need to capitalize it too, so I’ll also press the shift key – which is at the bottom right - with my right pinky at the same time. Ok, done. Now, the second letter is…”</em></p>
<p>Despite this complexity, the average person is able to type over 40 words per minute. Somehow their brains take what would otherwise be minutes, if not hours, of work and get through it in the space of seconds. You’ve probably experienced this yourself - think back to the last time you typed or texted. Did you have to consciously think through where each key was before you pressed it? Did you have to pause to figure out the spelling of every single word? Or how to properly conjugate your verbs? My guess is that you just answered “no” to at least one, if not all, of the above questions. And that, right there, is an example of your brain putting efficiency into action. That is the outcome of hours and hours and hours of time spent doing something (conjugating verbs, spelling words, typing letters, etc.) and, in the process, changing the architecture of your brain to make it more efficient. I guarantee that the first time you learned to type (or learned to spell or learned to conjugate), it did not go so smoothly. It probably took effort and time to even muster an attempt and the attempt was probably still wrong even after all the effort and time. But then you tried again. And again. And again. And, as you went, it got easier. It got faster. At some point, you stopped needing to <em>think</em> and were able to just <em>do</em>.</p>
<p>This is learning. Or, at least, this is one manifestation of learning and the coolest part is that it happens naturally. Each time your brain does something, it activates a set of neurons. That’s what a thought is; a collection of neurons activating. And every time a specific set of neurons activate together, it creates a little signal. The signal says, “Hey. We just activated together, and that means we might activate together again in the future.” Well, the first time it happens, it’s nothing remarkable. Random connections between neurons happen all the time. But if the same set of neurons activate together a second time… well, now there’s a signal worth noticing. And if it happens again and again and again, day after day, the signal becomes impossible to ignore: “This collection of neurons activates together.”</p>
<p>Following this, and in the name of evolutionary efficiency, your brain starts to make changes that bind this set of neurons together. It binds them together in such a way that activating one of the neurons can activate the whole cluster – so, now, instead of needing to activate each neuron in the cluster individually, the brain can just find one of them and then the whole set is ready to go! That makes it much faster and a whole lot easier to activate the entire set next time.</p>
<p>This means that as we do things over and over, we don’t just improve at those things because we discover new ways to do them better. No.&nbsp;So much more than that, we improve at them because our brains literally change – neuronal connections update, axons myelinate – and these changes enable us to do it faster, with less energy, and with less conscious oversight the next time we do it.</p>
<p>This is what the authors of Peak refer to as “building mental representations.” In the example of typing, your brain makes these changes - constructs these mental representations - at each level of processing: a representation for sentence structures, for verb conjugation, for word spelling, for finger movements. When you do something related to one of these (e.g., “How is this next word spelled?”), your brain reaches for the mental representation and that cluster of neurons just lights up on its own. For example, if I ask you how the number “3” is spelled, you probably don’t even need to think about it; the correct spelling just jumps into your head. That’s a mental representation. And mental representations like that are what enable people like you and me to be able to type much, much faster than conscious thought alone could ever support.</p>
<p>This is where the true power of mental representations lie. Because your brain is able to store these indefinitely and access them near instantaneously, as you build experience with any kind of skill, you also build your repertoire of mental representations and, therefore, your ability to perform more and more complex abilities. At first, you may need to think through every little piece of even the basics (e.g., “What letters make the ‘th’ sound at the start of ‘3’? And what letter makes the ‘rrrrr’ sound? And how about the ‘eee’ sound?”). As you build your mental representations, however, the basics become automatic, allowing you to spend your attention on more and more advanced techniques (e.g., automating spelling so that attention can be spent on word choice instead of letter sounds). Eventually, the intermediate processes get mental representations too. And that opens the gates to building mental representations for the advanced processes (e.g., automating word choice so that sentence composition can take the focus). And, if you practice correctly, this continues on and on until you begin to push the limits of what has ever been achieved before.</p>
<p>But we don’t need to go that far. Not yet. For now, we can settle for just mastering the advanced. As I mentioned earlier, one of the cool things about this whole process is that our brains are designed to do it naturally. However, this doesn’t mean we can get away with doing just anything and expect our brains to perfectly optimize. Instead, we need to tailor our practice to make use of the mechanisms we’ve adapted in order to develop most efficiently. According to the authors of Peak, the best way to do this is referred to as “deliberate practice.”</p>
</section>
<section id="a-brief-guide-to-deliberate-practice" class="level1">
<h1>A Brief Guide to Deliberate Practice</h1>
<p>Our goal under deliberate practice is to build mental representations. Doing this will allow us to work more efficiently and, because more advanced abilities depend on lower level representations, will allow us to progress more efficiently as well. In order to build these representations, we will spend our time and effort in such a way that the brain’s natural learning mechanisms are able to work and we will make sure that the representations we’re building are the right ones for us. This process takes time. It takes repetition. And it definitely takes a healthy amount of sleep (more on this later). For now though, we’ll start with step number one:</p>
<section id="find-a-good-teacher" class="level2">
<h2 class="anchored" data-anchor-id="find-a-good-teacher">1) Find a good teacher</h2>
<p>A good teacher is invaluable. They will be able to help you identify both the most useful things to work on as well as the ways in which you can improve what you’re doing. Oftentimes, a good teacher is someone who knows what you’re trying to accomplish well; someone who’s accomplished it themselves or someone who’s trained to help others reach that accomplishment before. Whatever it is you’re trying to do, it will likely help to have someone who knows more than you directing your efforts as you go.</p>
</section>
<section id="identify-something-specific-to-work-on" class="level2">
<h2 class="anchored" data-anchor-id="identify-something-specific-to-work-on">2) Identify something specific to work on</h2>
<p>Ideally, work with your teacher to identify this thing.</p>
<p>In order to build a mental representation, we need to make the neurons involved activate together over and over. The best way to make that happen is to do something that depends on the representation… over and over. The more times we get our brain to reach for the representation, the stronger the signal that this group of neurons are connected will be and, therefore, the more quickly those connections will be solidified.</p>
<p>If we go into practice without a specific goal in mind, it’s likely that we’ll spend our time doing numerous different things, bouncing around from one task to another. However, approaching practice like this doesn’t give our brain the chance to reach for a specific mental representation over and over and, in line with that, doesn’t give our brain the signal it needs to really solidify the representation.</p>
<p>Furthermore, without a specific goal, it can be difficult to identify ways in which to adjust what we’re doing to improve towards that goal. Without these adjustments, continued practice will just make it easier and faster to do the things we’re already doing. If what we’re already doing is correct, this is wonderful and no adjustments are needed. If, however, it is instead the case that we’re doing something wrong, then making those neuronal connections stronger actually turns out to be detrimental to us down the line. In all likelihood, if you’re still learning how to do something, your current approach is not optimal. It probably needs to be changed. Identifying specific goals to work towards and making attempts over and over will not only begin to solidify mental representations related to this goal but will also allow you to identify and highlight (and practice) ways to change what you’re doing before it’s been made too permanent.</p>
</section>
<section id="focus-100-while-you-practice" class="level2">
<h2 class="anchored" data-anchor-id="focus-100-while-you-practice">3) Focus 100% while you practice</h2>
<p>This one is straightforward. The more you can focus on what you’re practicing, the stronger the signal will be that <em>this</em> is important. The stronger that signal is, the quicker the mental representations will be built.</p>
<p>Further, letting yourself lapse and get sloppy with attempts will mean the wrong sets of neurons are activating together. In essence, if you’re giving anything less than your best, you’re building mental representations of subpar behaviors. Unfortunately, that’s going to make it that much harder in the future when you’re trying to learn more advanced skills that depend on these lower-level representations. Don’t let yourself be sloppy. Focus, 100%.</p>
<p>Now, with that said, it’s difficult to push yourself at 100% focus for long periods of time. Instead, limiting practice sessions to about an hour and having multiple sessions separated by generous breaks makes it much more feasible.</p>
</section>
<section id="get-feedback-and-make-it-as-objective-as-possible" class="level2">
<h2 class="anchored" data-anchor-id="get-feedback-and-make-it-as-objective-as-possible">4) Get feedback and make it as objective as possible</h2>
<p>Quantify your performance. Then use that information to adjust as you go. Are you making progress? At the rate you expect? Is your practice working or have you reached a plateau? Knowing what’s working and what isn’t is essential for creating and updating plans as you go. Unfortunately, humans are notoriously bad at making objective assessments of things. Instead of depending on biased intuitions, get concrete performance feedback whenever possible and use that information to help make decisions.</p>
</section>
<section id="additional-considerations" class="level2">
<h2 class="anchored" data-anchor-id="additional-considerations">Additional Considerations</h2>
<p>At this point, you’ve received a surface-level summary of deliberate practice, why it works, and how to do it. Though I’ve skipped over many of the details in creating this summary, what follows is a list of what I see as the details that are essential to mention:</p>
<ol type="1">
<li>Sleep is so important to this process. Get a full night’s rest every night, or your brain won’t have the time it needs to use the mechanisms that learning depends on.</li>
<li>The social environment exerts a powerful influence on our behaviors. Surround yourself with people who actively encourage and support your growth (not distract you from it). Encourage them, in turn. Creating communities of support helps both you in your own endeavors and the world around you.</li>
<li>Aim to work on skills that are just outside of your comfort zone. They should push you, but—with focus—you should be able to accomplish them. These are the skills for which your mental representations aren’t <em>quite</em> built yet. As you work on them and master them, they will lay the foundations for all the steps that come after and make learning those skills much more efficient.</li>
<li>If plateauing, try differently, not harder. Ideally, you’ll already be at 100% effort anyway. When approaching a barrier you can’t seem to overcome, changing your angle may help you see things you weren’t able to before.</li>
<li>During practice, actively searching for mistakes is critical.
<ul>
<li>This helps keeps you 100% focused instead of zoning out.</li>
<li>This also helps you identify and correct errors before they become too ingrained.</li>
</ul></li>
</ol>
</section>
</section>
<section id="applied-to-data-science" class="level1">
<h1>Applied to Data Science</h1>
<p>So! There you have it – a brief summary of deliberate practice, why it works, and how to do it. Now, as promised, here is the part of the blog where I begin to speculate on how to apply these ideas to learning data science. I’m certain that these perspectives will change as I gain more experience (and I’ll post an update after I’ve gotten some of that!) but, for now, here is what my intuition is telling me.</p>
<p>Data science (like any domain) is built upon being able to perform a set of skills, and­ (like any skills) performing these well depends on mental representations at various levels. Therefore, in order to improve at data science, my path forward involves (1) identifying the skills necessary to be a good data scientist and (2) practicing those skills until they become automated. This, of course, begs the question: what skills are needed?</p>
<ul>
<li><p>Statistics</p>
<ul>
<li><p>This one’s a no-brainer. Working with data requires understanding how to pull insights from data. In my (limited) exposure to the field, here are some of the techniques that have stood out to me as being need-to-know:</p>
<ul>
<li><p>Linear regression (simple and multiple)</p></li>
<li><p>Classification techniques</p>
<ul>
<li><p>Logistic regression</p></li>
<li><p>Discriminant analyses</p></li>
</ul></li>
<li><p>Unsupervised Learning</p>
<ul>
<li><p>Principle components analysis</p></li>
<li><p>K-means clustering</p></li>
</ul></li>
<li><p>Sampling and validation techniques</p>
<ul>
<li><p>Bootstrapping</p></li>
<li><p>Cross validation</p></li>
</ul></li>
<li><p>Bayesian approaches</p></li>
<li><p>Hierarchical Modeling</p></li>
</ul></li>
</ul></li>
<li><p>Programming languages</p>
<ul>
<li><p>These days, our statistical techniques are well beyond the ability of humans to do quickly by hand. Therefore, we use machines to do the calculations for us. Unfortunately, machines don’t speak English, so we need to be able to speak something they can understand: programming languages. The internet seems sold on the idea that Python is the best programming language for data science, so I may need to learn that one day. For the time being though, my source on the inside says being an expert with R works well enough once you’re in the industry (especially if you know how to make use of the visualization capacities R has). So, here are the languages it’s looking like I’ll need to become proficient or better with.</p>
<ul>
<li><p>R</p>
<ul>
<li><p>TidyVerse</p></li>
<li><p>GGplot2</p></li>
<li><p>Plotly</p></li>
<li><p>Various packages related to various statistical techniques</p></li>
</ul></li>
<li><p>SQL</p></li>
</ul></li>
</ul></li>
<li><p>Communication</p>
<ul>
<li>There’s little point in learning anything if you can’t communicate what you’ve learned to the people who need the information. Oftentimes in industry, the people who need the information are not statisticians themselves. Being able to take complicated ideas and express them in a way that’s intuitive to a wide audience is an essential skill for data scientists.</li>
</ul></li>
<li><p>Practical statistics</p>
<ul>
<li><p>I’m separating out “practical statistics” from “statistics” because I see them as two distinct sides of the same coin. In the “statistics” section, I outlined a number of different techniques which each have their own formulas and assumptions, inputs and outputs, and mathematical intricacies. Understanding that math is what I’m calling “statistics.” However, the math isn’t everything; being able to understand equations is a very different skill from being able to work with data in ambiguous situations, especially under imperfect circumstances (e.g., unclear objectives, missing data, violated assumptions, etc.). Being able to figure out when and why to use different techniques is what I’m calling “practical statistics.”</p>
<ul>
<li>It’s not always obvious what the best approach to a problem may be and it’s almost certainly the case that managers (who likely have little statistical training themselves) will not know what information you need to figure it out. This means that you need to know what information you need and you need to know how to ask the right questions to get that information.</li>
</ul></li>
</ul></li>
</ul>
<p>I’m sure there are more skills I’ll need to develop to become a good data scientist. For now, however, this list seems like a good start. Developing them will be a matter of time and deliberate practice: finding teachers, identifying specific goals, focusing, getting feedback, and adjusting. From here out, this blog will serve as part of that practice. I’ll be using it to think through the things I’m learning, keep track of my progress, and, hopefully, share that progress with others as I go.</p>
<p>If you’ve made it this far – thanks for reading! If you’re part of a hiring committee – read my more recent posts; I’m sure they’re better. And if you’re an aspiring data scientist like me or maybe just an inquisitive reader – I hope you learned something interesting and good luck!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>